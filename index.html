<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>佳咊配方管理系統</title>

  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <!-- Element Plus CDN -->
  <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
  <script src="https://unpkg.com/element-plus/dist/index.full.js"></script>

  <!-- Element Plus Icons -->
  <script src="https://unpkg.com/@element-plus/icons-vue"></script>

  <style>
    body, html {
      margin: 0;
      height: 100%;
      font-family: Arial, sans-serif;
    }

    #app {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    /* 頂部抬頭 */
    .header {
      height: 60px;
      background-color: #2c3e50;
      color: white;
      display: flex;
      align-items: center;
      padding: 0 20px;
      font-size: 20px;
      box-sizing: border-box;
    }

    /* 主體區域 */
    .main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    /* 左側功能列 */
    .sidebar {
      width: 250px;
      background-color: #f5f5f5;
      padding: 10px;
      box-sizing: border-box;
      overflow-y: auto;
      transition: all 0.3s ease;
      position: relative;
    }

    .sidebar.collapsed {
      width: 0;
      padding: 0;
      overflow: hidden;
    }

    /* 折疊按鈕 */
    .collapse-btn {
      position: absolute;
      right: -15px;
      top: 10px;
      z-index: 10;
      width: 30px;
      height: 30px;
      background-color: #2c3e50;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .collapse-btn:hover {
      background-color: #34495e;
    }

    /* 右側 iframe */
    .content {
      flex: 1;
      height: 100%;
    }

    .content iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
</head>
<body>
<div id="app">
  <!-- 頂部抬頭 -->
  <div class="header">
    佳咊配方管理系統
  </div>

  <!-- 主體區域 -->
  <div class="main">
    <!-- 左側選單 -->
    <div class="sidebar" :class="{ collapsed: isCollapsed }">
      <button class="collapse-btn" @click="toggleSidebar">
        <el-icon><d-arrow-left v-if="!isCollapsed" /><d-arrow-right v-else /></el-icon>
      </button>
      <el-menu
        default-active="1-1"
        class="el-menu-vertical-demo"
        @select="handleSelect"
        background-color="#f5f5f5"
        text-color="#000000"
        active-text-color="#dbd818"
      >
        <!-- 色粉管理 -->
        <el-menu-item index="1-1">
          <el-icon><color-pallete /></el-icon>色粉管理
        </el-menu-item>

        <!-- 配方管理 -->
        <el-sub-menu index="2">
          <template #title><el-icon><document /></el-icon>配方管理</template>
          <el-menu-item index="2-1">客戶名單</el-menu-item>
          <el-menu-item index="2-2">配方管理</el-menu-item>
        </el-sub-menu>

        <!-- 生產單管理 -->
        <el-sub-menu index="3">
          <template #title><el-icon><collection /></el-icon>生產單管理</template>
          <el-menu-item index="3-1">生產單</el-menu-item>
          <el-menu-item index="3-2">代工排程</el-menu-item>
        </el-sub-menu>

        <!-- 查詢區 -->
        <el-sub-menu index="4">
          <template #title><el-icon><search /></el-icon>查詢區</template>
          <el-menu-item index="4-1">Pantone色號表</el-menu-item>
          <el-menu-item index="4-2">交叉查詢區</el-menu-item>
        </el-sub-menu>

        <!-- 庫存區 -->
        <el-menu-item index="5">
          <el-icon><box /></el-icon>庫存區
        </el-menu-item>

        <!-- 其他單獨項目 -->
        <el-menu-item index="6"><el-icon><shopping-cart /></el-icon>採購管理</el-menu-item>
        <el-menu-item index="7"><el-icon><coin /></el-icon>銷售管理</el-menu-item>
        <el-menu-item index="8"><el-icon><document-checked /></el-icon>會計系統</el-menu-item>
        <el-menu-item index="9"><el-icon><user /></el-icon>人力資源</el-menu-item>
        <el-menu-item index="10"><el-icon><upload /></el-icon>匯入備份</el-menu-item>
      </el-menu>
    </div>

    <!-- 右側 iframe -->
    <div class="content">
      <iframe :src="iframeUrl" title="配方管理系統"></iframe>
    </div>
  </div>
</div>

<script>
const { createApp, ref } = Vue;
const Icons = ElementPlusIconsVue;

const app = createApp({
  setup() {
    const iframeUrl = ref('https://color-powder-app.streamlit.app/#recipe-table');
    const isCollapsed = ref(false);

    const toggleSidebar = () => {
      isCollapsed.value = !isCollapsed.value;
    };

    const handleSelect = (index) => {
      switch(index){
        case '1-1': iframeUrl.value = 'https://color-powder-app.streamlit.app/#color-powder'; break;
        case '2-1': iframeUrl.value = 'https://color-powder-app.streamlit.app/#customer-list'; break;
        case '2-2': iframeUrl.value = 'https://color-powder-app.streamlit.app/#recipe'; break;
        case '3-1': iframeUrl.value = 'https://color-powder-app.streamlit.app/#production-order'; break;
        case '3-2': iframeUrl.value = 'https://color-powder-app.streamlit.app/#outsourcing'; break;
        case '4-1': iframeUrl.value = 'https://color-powder-app.streamlit.app/#pantone'; break;
        case '4-2': iframeUrl.value = 'https://color-powder-app.streamlit.app/#cross-query'; break;
        case '5': iframeUrl.value = 'https://color-powder-app.streamlit.app/#inventory'; break;
        case '6': iframeUrl.value = 'https://color-powder-app.streamlit.app/#purchase'; break;
        case '7': iframeUrl.value = 'https://color-powder-app.streamlit.app/#sales'; break;
        case '8': iframeUrl.value = 'https://color-powder-app.streamlit.app/#accounting'; break;
        case '9': iframeUrl.value = 'https://color-powder-app.streamlit.app/#hr'; break;
        case '10': iframeUrl.value = 'https://color-powder-app.streamlit.app/#backup'; break;
        default: iframeUrl.value = 'https://color-powder-app.streamlit.app/#recipe-table';
      }
    };

    return { iframeUrl, handleSelect, isCollapsed, toggleSidebar };
  }
});

// 註冊 Element Plus Icons
for (const [key, component] of Object.entries(Icons)) {
  app.component(key, component);
}

app.use(ElementPlus);
app.mount('#app');
</script>
</body>
</html>
